<link href="https://cdn.jsdelivr.net/npm/jquery-resizable-columns@0.2.3/dist/jquery.resizableColumns.min.css" rel="stylesheet">
<link href="https://cdn.jsdelivr.net/npm/bootstrap-table@1.22.2/dist/bootstrap-table.min.css" rel="stylesheet">
<link rel="stylesheet" href="/static/css/table.css">

<html lang="en">
  <%- include('./partials/head',{title:"Nostrcheck Server - Dashboard"}); %>

  <body class="d-flex flex-column h-100">
    <%- include('./partials/navbar', {active:'home'}); %>
    <main class="pb-1">
      <h1 class="col-12 text-center">Dashboard</h1>
      <div class="container-fluid mt-4 overflow-auto ">
        <%- include('./components/table', {
                                      tableName:"Registered users", 
                                      tableId:"registeredData", 
                                      buttons:[
                                              ['add','show'],
                                              ['disable','show'],
                                              ['admin','show'],
                                              ['edit','show'],
                                              ['password','show'],
                                              ['remove','show']
                                              ],
                                      fields:[
                                              ['username','enabled'],
                                              ['pubkey','enabled'],
                                              ['domain','enabled'],
                                              ['active','enabled'],
                                              ['allowed','enabled'],
                                              ['comments','enabled']
                                              ]
                                      }); %>

        <%- include('./components/table', {
                                      tableName:"Media files", 
                                      tableId:"mediafilesData", 
                                      buttons:[
                                              ['add','show'],
                                              ['disable','show'],
                                              ['admin','hide'],
                                              ['edit','show'],
                                              ['password','hide'],
                                              ['remove','show']
                                              ],
                                      fields:[
                                              ['pubkey','enabled'],
                                              ['filename','disabled'],
                                              ['original_hash','disabled'],
                                              ['hash','disabled'],
                                              ['status','enabled'],
                                              ['visibility','enabled'],
                                              ['dimensions','enabled'],
                                              ['filesize','enabled'],
                                              ['date','enabled'],
                                              ['comments','enabled']
                                              ]
                                      }); %>

        <%- include('./components/table', {
                                        tableName:"Lightning redirections", 
                                        tableId:"lightningData", 
                                        buttons:[
                                          ['add','show'],
                                          ['disable','hide'],
                                          ['admin','hide'],
                                          ['edit','show'],
                                          ['password','hide'],
                                          ['remove','show']
                                        ],
                                        fields:[
                                        ['pubkey','enabled'],
                                        ['lightningaddress','enabled'],
                                        ['comments','enabled']
                                        ]
                                        }); %>
     
        <%- include('./components/table', {
                                        tableName:"Active domain names", 
                                        tableId:"domainsData", 
                                        buttons:[
                                          ['add','show'],
                                          ['disable','show'],
                                          ['admin','hide'],
                                          ['edit','show'],
                                          ['password','hide'],
                                          ['remove','show']
                                        ],
                                        fields:[
                                        ['domain','enabled'],
                                        ['active','enabled'],
                                        ['comments','enabled']
                                        ]
                                        }); %> 
      </div>
      <div>
        <canvas id="myChart"></canvas>
      </div>
    </main>
    <%- include('./partials/footer'); %>                               
  </body>

  <script src="/static/js/table.js"></script>
  <script>
    initTable("#registeredData",'<%- JSON.stringify(request.body.registeredData) %>')
    initTable("#mediafilesData",'<%- JSON.stringify(request.body.mediafilesData) %>')
    initTable("#lightningData",'<%- JSON.stringify(request.body.lightningData) %>')
    initTable("#domainsData",'<%- JSON.stringify(request.body.domainsData) %>')
  </script>


<!-- TESTING -->
<script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
<script>
  const ctx = document.getElementById('myChart');

  new Chart(ctx, {
    type: 'bar',
    data: {
      labels: ['Red', 'Blue', 'Yellow', 'Green', 'Purple', 'Orange'],
      datasets: [{
        label: '# of Votes',
        data: [12, 19, 3, 5, 2, 3],
        borderWidth: 1
      }]
    },
    options: {
      scales: {
        y: {
          beginAtZero: true
        }
      }
    }
  });
  </script>
</html>
