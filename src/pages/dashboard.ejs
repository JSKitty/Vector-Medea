<html lang="en">
<%- include('./partials/head',{title:"Nostrcheck Server - Home"}); %>
<body class="d-flex flex-column h-100">
    <%- include('./partials/navbar', {active:'home'}); %>
    <main class="pb-1">
    <h1 class="col-12 text-center">Dashboard</h1>
    <div class="container mt-4">
      <table class="table table-striped table-hover">
        <% for(const key in request.body.registeredUsernames) { %>
          <tr>
            <th>ID</th>
            <th>Username</th>
            <th>Pubkey</th>
            <th>Domain</th>
            <th>Active</th>
            <th>Allowed</th>
            <th>Date</th>
            <th>Comments</th>
          </tr>
          <tr>
            <td><%= request.body.registeredUsernames[key]['id'] %></td>
            <td><%= request.body.registeredUsernames[key]['username'] %></td>
            <td><%= request.body.registeredUsernames[key]["pubkey"] %></td>
            <td><%= request.body.registeredUsernames[key]["domain"] %></td>
            <td><%= request.body.registeredUsernames[key]["active"] %></td>
            <td><%= request.body.registeredUsernames[key]["allowed"] %></td>
            <td><%= request.body.registeredUsernames[key]["date"] %></td>
            <td><%= request.body.registeredUsernames[key]["comments"] %></td>
          </tr>
        <% } %>
      </table>
    </div>
    <p class="text-center mt-3">Nostrcheck server <%= request.body.version %> is running at localhost in development mode. By using this server you agree the <a href='/tos'>Terms of Service</a></p>
    </main>
    <%- include('./partials/footer'); %>
  </body>
</html>