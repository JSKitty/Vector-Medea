<div class="row row-cols-1 row-cols-md-2 row-cols-xl-3 g-2">
    <% for(let i = request.session.metadata.mediaFiles.length - 1; i >= 0; i--) { %>
      <div class="col mb-0">
        <% let file = request.session.metadata.mediaFiles[i]; %>
        <% let ext = file.split('.').pop(); %>
        <% if (ext === 'webp' || ext === 'gif' || ext === 'jpg') { %>
          <div style="height: 220px; overflow: hidden;" class="rounded-3">
            <img data-src="media/<%= request.session.metadata.username %>/<%= file %>" class="rounded-3 w-100 h-100 object-fit-cover" loading="lazy">
          </div>
        <% } else if (ext === 'mp4') { %>
          <video data-src="media/<%= request.session.metadata.username %>/<%= file %>" style="width: 100%; height: 220px; object-fit: cover;" class="rounded-3" autoplay muted playsinline loop loading="lazy">
            <source data-src="media/<%= request.session.metadata.username %>/<%= file %>">Your browser does not support the video tag.</video>
        <% } else if (ext === 'mp3') { %>
          <div style="height: 220px;background: url('/static/resources/music-loading.webp') center center / cover no-repeat;" class="rounded-3 d-flex flex-column align-items-center justify-content-end pb-2">
            <audio controls data-src="media/<%= request.session.metadata.username %>/<%= file %>" class="w-75 h-75" loading="lazy">Your browser does not support the audio tag.</audio>
          </div>
        <% } %>
      </div>
    <% } %>
</div>